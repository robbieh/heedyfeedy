# HeedyFeedy

A Progressive Web App to make entering data for [Heedy](https://heedy.org) easier.

!["Screenshot of HeedyFeedy app"](../../../raw/branch/dev/media/HeedyFeedy.png)

## Deployment

*You must have your own Heedy instance.* This does not provide any of Heedy's
functionality. Heedyfeedy only acts as an app to make entering data easier.

Since you have Heedy, I'm assuming you have an intrest in self-hosting and some
basic knowledge of how to handle the complexities of that.

HeedyFeedy is only HTML+JS+CSS content intended to be served as a static site.
No backend server is required - Heedy provides the backend.

The two big hurdles to overcome in deploying it are:
* PWAs require a secure context, so you will have to serve HeedyFeedy from an
  SSL-protected URL.
* Heedy's content security policy only allows web apps to access it from the same
  domain. Thus HeedyFeedy will have to be served from a different path on the
  same domain to work properly

This should be easy to accomplish by placing Apache, Nginx, or some other reverse 
proxy in front of Heedy. Here is an example `VirtualHost` stanza for Apache:

```
<VirtualHost heedy.example.org:443>
        ServerName heedy.example.org
        DocumentRoot /var/www/heedyfeedy
        ProxyPass /heedyfeedy ! 
        ProxyPass / http://heedy.example.org:1324/ upgrade=websocket
        # lines below generated by certbot
        SSLCertificateFile /etc/letsencrypt/live/heedy.example.org/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/heedy.example.org/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
```

This assumes your Heedy instance is running at heedy.example.org on port 1324.

Place the HeedyFeedy release files in /var/www/heedyfeedy/heedyfeedy for this example.
Note the doubling of the name needed because the `DocumentRoot` has the same name.

## Installing the PWA

This heavily depends on the browser and device you're using, but the gist of it is to visit
the HeedyFeedy URL you deployed to and finding the "install" button in the browser. This should
create an icon on your device so you can use it as an offline-capable app.

## Using

First, generate an app token on the Heedy server.

Next, log in by giving HeedyFeedy the URL to the back end server, your user name, 
and the token. In the example case above, just use `https://heedy.example.org/` as the url.

You have to generate timeseries objects on Heedy itself. HeedyFeedy only reads the
list of available objects and presents them to you. Strings and numbers will be presented
as entry boxes under a `General` group. Every enum type will be expanded into a seperate
group and shows a button for each possible enum.

Tap the enum buttons or down arrow for the entry fields and the matching entry will show 
up in a "checkout basket" at the bottom of the app. When you have all the entries you want
just tap the upload button to send them to Heedy.

If you are outside of your network or otherwise offline, HeedyFeedy will keep the entries
in the basket until you are ready to upload them again.

Use the reload button at the top right to refresh the list of Heedy timeseries objects.

## Development status

This is still very beta. The "star rating" type is not implemented.
